(()=>{"use strict";const e=document.querySelector("#categoria"),t=document.querySelector("#stock"),o=document.querySelector("#cantidad"),a=document.querySelector("#btn_comprar"),i=document.querySelector("#temp_pasajes"),n=document.querySelector("#ventas");let c=1,r=0,s={};const l=[{categoria:"Económico",stock:40,precio:50},{categoria:"Semi Cama",stock:40,precio:70},{categoria:"Cama",stock:40,precio:90},{categoria:"VIP",stock:40,precio:120}],d=[],u=e=>{const o=l[e-1].stock;t.innerText=`Asientos disponibles: ${o}`},p=()=>{e.value=1,o.value=1,u(1)},m=()=>{n.innerHTML="",0===d.length?n.innerHTML="<h3>Aún no se han registrado ventas.</h3>":(n.innerHTML="",d.forEach((e=>{const t=document.importNode(i.content,!0);t.querySelector(".tipo").textContent=`Cliente: ${e.id}`,t.querySelector(".pasaje").innerHTML=`<li>Categoria: ${e.pasajes.categoria}</li>\n                <li>Precio: S/${e.pasajes.precio}</li>\n                <li>N. Boletos: ${e.pasajes.cantidad}</li>\n                <li>Beneficios: ${e.descuento}</li>\n                <li>Subtotal: ${e.subtotal}</li>\n                `,t.querySelector(".total").textContent=`Total: ${e.total}`;const o=t.querySelector(".btn_eliminar");o.setAttribute("id",e.indice),o.addEventListener("click",g),n.appendChild(t)})))},g=e=>{if(confirm("¿Estas seguro de eliminar la venta?")){const t=d.findIndex((t=>t.indice===1*e.target.id));d.splice(t,1),m()}};e.addEventListener("change",(e=>{u(e.target.value)})),a.addEventListener("click",(t=>{(()=>{const t=e.value,{categoria:a,precio:i}=l[t-1],n=1*o.value,u=i*n;let m=l[t-1].stock;isNaN(n)||n<=0||n>m?alert("Por favor, ingrese una cantidad válida."):confirm("Confirmar pedido.")?(l[t-1].stock-=n,s={id:c,indice:r,pasajes:{categoria:a,precio:i,cantidad:n},subtotal:u,descuento:n<5?"Sin Beneficios":"Descuento del 15%",total:n<5?u:.85*u},r++,d.push(s),p(),confirm("¿Seguir comprando?")||(c++,p())):(alert("Compra cancelada."),p())})(),m()})),p(),m()})();